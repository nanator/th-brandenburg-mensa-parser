from __future__ import print_function
from datetime import datetime, timedelta
from mensa_parser import MensaParser

def mensa_parser_test():
    url = "https://www.studentenwerk-potsdam.de/essen/unsere-mensen-cafeterien/detailinfos/?tx_typoscriptrendering%5Bcontext%5D=%7B%22record%22%3A%22pages_66%22%2C%22path%22%3A%22tt_content.list.20.ddfmensa_ddfmensajson%22%7D&tx_ddfmensa_ddfmensajson%5Bmensa%5D=38&cHash=0843fa029901bdfc0e76d8f31eee7f56"

    #speech_output = "Ich gebe hier den Mensaplan aus."
    #parser = MensaParser(url)
    #angebot = parser.get_offer_for_date(datetime.now())
    s = "Kr\\u00e4uterr\\u00fchrei mit Letscho, dazu S\u00fc\u00dfstoffe"

    s = s.replace(r"\u00e4", r"ä")
    s = s.replace(r"\u00fc", r"ü")
    s = s.replace(r"\u00df", r"ß")

    print(s)


#gives entry with respective date
    def get_offer_for_date(self,date):
        weekday = date.weekday()
        date = date.strftime("%d.%m.%Y")
        angebote = {}
        #read in the mensa offer into a dict
        for x in self.mlist:
            if x["datum"]["data"] == date:
                angebote["datum"] = date
                for y in x["datum"]["angebote"]:
                    angebote["angebot" + str(y["id"] + 1)] = y["beschreibung"]
        return angebote

if __name__ == '__main__':
    mensa_parser_test()
